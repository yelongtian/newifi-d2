function initApp() { loadPreferences(); setupLanguageSelector(); setupThemeSelector(); applyLanguage(); applyTheme(); injectAuthorFooter() } function injectAuthorFooter() { const n = document.querySelectorAll("div#main"); n.length && n.forEach(n => { if (n && n.parentNode) { const t = n.nextElementSibling; if (!t || t.tagName !== "FOOTER" || t.getAttribute("data-generated-footer") !== "author") { const t = document.createElement("footer"); t.setAttribute("data-generated-footer", "author"); t.setAttribute("role", "contentinfo"); t.className = "page-footer"; t.textContent = "ğŸ’¡Yuzhii"; n.insertAdjacentElement("afterend", t) } } }) } function loadPreferences() { const n = localStorage.getItem("preferredLanguage"); if (n && translations[n]) currentLang = n; else { const n = navigator.language.split("-")[0]; translations[n] && (currentLang = n) } const t = localStorage.getItem("preferredTheme"); t && (currentTheme = t) } function setupLanguageSelector() { const n = document.getElementById("language-selector"); n && (n.value = currentLang, n.addEventListener("change", function () { currentLang = this.value; localStorage.setItem("preferredLanguage", currentLang); applyLanguage() })) } function setupThemeSelector() { const n = document.getElementById("theme-selector"); n && (n.value = currentTheme, n.addEventListener("change", function () { currentTheme = this.value; localStorage.setItem("preferredTheme", currentTheme); applyTheme() })) } function applyLanguage() { const n = translations[currentLang] || translations.en; document.title = n.title || document.title; document.querySelectorAll("[data-i18n]").forEach(t => { const i = t.getAttribute("data-i18n"); n[i] && ("INPUT" !== t.tagName || "submit" !== t.type && "button" !== t.type ? t.textContent = n[i] : t.value = n[i]) }) } function applyTheme() { document.documentElement.setAttribute("data-theme", currentTheme); "auto" === currentTheme ? document.documentElement.classList.remove("force-light", "force-dark") : "light" === currentTheme ? (document.documentElement.classList.add("force-light"), document.documentElement.classList.remove("force-dark")) : "dark" === currentTheme && (document.documentElement.classList.add("force-dark"), document.documentElement.classList.remove("force-light")) } const translations = { en: { title: "MediaTek System Recovery Mode", banner: "U-Boot Recovery Mode", upload_new: "Upload new firmware:", upload_button: "Upload", file_confirmation: "File confirmation:", md5: "MD5:", size: "Size:", bytes: "Bytes", proceed_info: "If all information above is correct, click [Proceed].", proceed_button: "Proceed", upgrading: "Upgrading is in progressing, please wait ...", page_status: "This page may be in not responding status for a short time.", upgrade_complete: "Upgrade complete!", rebooting: "Rebooting ...", upgrade_failed: "Upgrade failed!", "return": "Return", page_not_found: "Page not found", theme_light: "Light", theme_dark: "Dark", theme_auto: "Auto" }, zh: { title: "MediaTek ç³»ç»Ÿæ¢å¤æ¨¡å¼", banner: "U-Boot æ¢å¤æ¨¡å¼", upload_new: "ä¸Šä¼ æ–°å›ºä»¶ï¼š", upload_button: "ä¸Šä¼ ", file_confirmation: "æ–‡ä»¶ç¡®è®¤ï¼š", md5: "MD5å€¼ï¼š", size: "å¤§å°ï¼š", bytes: "å­—èŠ‚", proceed_info: "å¦‚æœä»¥ä¸Šä¿¡æ¯æ­£ç¡®ï¼Œè¯·ç‚¹å‡» [ç»§ç»­]ã€‚", proceed_button: "ç»§ç»­", upgrading: "æ­£åœ¨å‡çº§ï¼Œè¯·ç¨å€™...", page_status: "æ­¤é¡µé¢å¯èƒ½ä¼šçŸ­æ—¶é—´å†…æ— å“åº”ã€‚", upgrade_complete: "å‡çº§å®Œæˆï¼", rebooting: "æ­£åœ¨é‡å¯...", upgrade_failed: "å‡çº§å¤±è´¥ï¼", "return": "è¿”å›", page_not_found: "é¡µé¢æœªæ‰¾åˆ°", theme_light: "æµ…è‰²", theme_dark: "æ·±è‰²", theme_auto: "è‡ªåŠ¨" } }; let currentLang = "en", currentTheme = "auto"; window.addEventListener("DOMContentLoaded", initApp)